<!DOCTYPE html>
<html  lang="zh-CN" >
<head>
  <meta charset="UTF-8">
  <meta name="viewport"
    content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="theme-color" content="#fff" id="theme-color">
  <meta name="description" content="èœ—ç‰› Java ä¹‹å®¶ (java4u.cn) æ˜¯ Java ç¨‹åºå‘˜çš„æˆé•¿è¿›é˜¶ç¤¾åŒºï¼Œè‡´åŠ›äºä¸ºå¹¿å¤§å­¦ä¹  Java çš„ç¨‹åºå‘˜ä»¬æä¾›è®¡ç®—æœºä¸“ä¸šç›¸å…³çš„ç»éªŒæ•™ç¨‹ã€å­¦ä¹ èµ„æ–™å’Œä¹¦ç±ï¼ŒåŒ…æ‹¬Javaã€æ•°æ®åº“ã€Linuxã€ç½‘ç»œç­‰å­¦ä¹ å¹²è´§ã€ITç¨‹åºå‘˜å¸¸ç”¨è½¯ä»¶å·¥å…·åˆ†äº«ã€è®¡ç®—æœºä¸“ä¸šç»å…¸ç”µå­ä¹¦PDFï¼Œå¸®åŠ© Java ç¨‹åºå‘˜æ›´å¿«å…¥é—¨å’Œæé«˜ã€‚">
  <link rel="icon" href="/img/logo.jpg">
  <title>10.é¿å…æ´»è·ƒåº¦å±é™©&nbsp; | &nbsp;Java for You</title>
  
  
  <meta property="og:title" content="10.é¿å…æ´»è·ƒåº¦å±é™©">
  
  
  <meta property="og:url" content="https://java4u.cn/Java%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/10-%E9%81%BF%E5%85%8D%E6%B4%BB%E8%B7%83%E5%BA%A6%E5%8D%B1%E9%99%A9/index.html">
  
  
  <meta property="og:img" content="/img/logo.jpg">
  
  
  <meta property="og:img" content="èœ—ç‰› Java ä¹‹å®¶ (java4u.cn) æ˜¯ Java ç¨‹åºå‘˜çš„æˆé•¿è¿›é˜¶ç¤¾åŒºï¼Œè‡´åŠ›äºä¸ºå¹¿å¤§å­¦ä¹  Java çš„ç¨‹åºå‘˜ä»¬æä¾›è®¡ç®—æœºä¸“ä¸šç›¸å…³çš„ç»éªŒæ•™ç¨‹ã€å­¦ä¹ èµ„æ–™å’Œä¹¦ç±ï¼ŒåŒ…æ‹¬Javaã€æ•°æ®åº“ã€Linuxã€ç½‘ç»œç­‰å­¦ä¹ å¹²è´§ã€ITç¨‹åºå‘˜å¸¸ç”¨è½¯ä»¶å·¥å…·åˆ†äº«ã€è®¡ç®—æœºä¸“ä¸šç»å…¸ç”µå­ä¹¦PDFï¼Œå¸®åŠ© Java ç¨‹åºå‘˜æ›´å¿«å…¥é—¨å’Œæé«˜ã€‚">
  
  
  <meta property="og:type" content="article">
  <meta property="og:article:published_time" content="2016-05-04">
  <meta property="og:article:modified_time" content="2020-12-19">
  <meta property="og:article:author" content="èœ—ç‰› Java ä¹‹å®¶">
  
  
  <meta property="og:article:tag" content="Java">
  
  <meta property="og:article:tag" content="Javaå¹¶å‘">
  
  <meta property="og:article:tag" content="é¿å…æ´»è·ƒåº¦å±é™©">
  
  
  
  
  <script>
    // control reverse button
    var reverseDarkList = {
      dark: 'light',
      light: 'dark'
    };
    var themeColor = {
      dark: '#1c1c1e',
      light: '#fff'
    }
    // get the data of css prefers-color-scheme
    var getCssMediaQuery = function() {
      return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
    };
    // reverse current darkmode setting function
    var reverseDarkModeSetting = function() {
      var setting = localStorage.getItem('user-color-scheme');
      if(reverseDarkList[setting]) {
        setting = reverseDarkList[setting];
      } else if(setting === null) {
        setting = reverseDarkList[getCssMediaQuery()];
      } else {
        return;
      }
      localStorage.setItem('user-color-scheme', setting);
      return setting;
    };
    // apply current darkmode setting
    var setDarkmode = function(mode) {
      var setting = mode || localStorage.getItem('user-color-scheme');
      if(setting === getCssMediaQuery()) {
        document.documentElement.removeAttribute('data-user-color-scheme');
        localStorage.removeItem('user-color-scheme');
        document.getElementById('theme-color').content = themeColor[setting];
      } else if(reverseDarkList[setting]) {
        document.documentElement.setAttribute('data-user-color-scheme', setting);
        document.getElementById('theme-color').content = themeColor[setting];
      } else {
        document.documentElement.removeAttribute('data-user-color-scheme');
        localStorage.removeItem('user-color-scheme');
        document.getElementById('theme-color').content = themeColor[getCssMediaQuery()];
      }
    };
    setDarkmode();
  </script>
  <script>
    function loadScript(url, cb) {
      var script = document.createElement('script');
      script.src = url;
      if (cb) script.onload = cb;
      script.async = true;
      document.body.appendChild(script);
    }
  </script>
  
  <link rel="preload" href="//at.alicdn.com/t/font_1946621_i1kgafibvw.css" as="style" >
  <link rel="preload" href="//at.alicdn.com/t/font_1952792_89b4ac4k4up.css" as="style" >
  
  <link rel="preload" href="/js/lib/lightbox/baguetteBox.min.js" as="script">
  <link rel="preload" href="/js/lib/lightbox/baguetteBox.min.css" as="style" >
  
  
  <link rel="preload" href="/js/lib/lozad.min.js" as="script">
  
  
  
  
  
  <link rel="prefetch" href="//cdn.jsdelivr.net/npm/mathjax@3.0.5/es5/tex-svg.js" as="script">
  
  
  
  <link rel="prefetch" href="https://cdn.jsdelivr.net/npm/valine@1.4.14/dist/Valine.min.js" as="script">
  
  
  
  
<link rel="stylesheet" href="/css/main.css">

  
  
<link rel="stylesheet" href="//at.alicdn.com/t/font_1946621_i1kgafibvw.css">

  
  
<link rel="stylesheet" href="//at.alicdn.com/t/font_1952792_89b4ac4k4up.css">

  
  
<link rel="stylesheet" href="/js/lib/lightbox/baguetteBox.min.css">

  
  
  
  


  <!-- ç™¾åº¦ç«™é•¿å·¥å…·éªŒè¯ -->
  <meta name="baidu-site-verification" content="code-9cIsKsXy75" />

  <!-- å¿…åº”ç«™é•¿å·¥å…·éªŒè¯-->
  <meta name="msvalidate.01" content="81AA8F485E800B7335F07A558BE9A636" />

  <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-C22LNC79YC"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-C22LNC79YC');
</script>
<meta name="generator" content="Hexo 5.2.0"></head>


<body>
  <div class="wrapper">
    
    <nav class="navbar">
  <div class="navbar-logo">
    <span class="navbar-logo-main">
      
      <img class="navbar-logo-img" src="/img/logo.jpg" alt="logo">
      
      <span class="navbar-logo-dsc">èœ—ç‰› Java ä¹‹å®¶</span>
    </span>
  </div>
  <div class="navbar-menu">
    
    <a href="/" class="navbar-menu-item">
    
    é¦–é¡µ
    
    </a>
    
    <a href="/resources" class="navbar-menu-item">
    
    å…è´¹èµ„æº
    
    </a>
    
    <a href="/tools" class="navbar-menu-item">
    
    å…è´¹å·¥å…·
    
    </a>
    
    <a href="/categories" class="navbar-menu-item">
    
    åˆ†ç±»
    
    </a>
    
    <a href="/links" class="navbar-menu-item">
    
    å‹é“¾
    
    </a>
    
    <a class="navbar-menu-item darknavbar" id="dark"><i class="iconfont icon-weather"></i></a>
    <a class="navbar-menu-item searchnavbar" id="search"><i class="iconfont icon-search" style="font-size: 1.2rem; font-weight: 400;"></i></a>
  </div>
</nav>
    
    <div id="local-search" style="display: none;">
      <input class="navbar-menu-item" id="search-input" placeholder="è¯·è¾“å…¥æœç´¢å†…å®¹...">
      <div id="search-content"></div>
    </div>
    
    <div class="section-wrap">
      <div class="container">
        <div class="columns">
          <main class="main-column">
<article class="card card-content">
  <header>
    <h1 class="post-title">
      10.é¿å…æ´»è·ƒåº¦å±é™©
    </h1>
  </header>
  <div class="post-meta post-show-meta">
    <time datetime="2016-05-04T04:00:00.000Z">
      <i class="iconfont icon-calendar" style="margin-right: 2px;"></i>
      <span>2016-05-04</span>
    </time>
    
    <span class="dot"></span>
    
    <a href="/categories/Javaå¹¶å‘ç¼–ç¨‹/" class="post-meta-link">Javaå¹¶å‘ç¼–ç¨‹</a>
    
    
    
    <span class="dot"></span>
    <span>4.7k å­—</span>
    

    <span class="dot"></span>
    <!-- å¢åŠ é˜…è¯»é‡ç»Ÿè®¡æ ·å¼ä»£ç  -->
    
    <!-- id å°†ä½œä¸ºæŸ¥è¯¢æ¡ä»¶ -->
    <i class="iconfont icon-wodebaobiao" style="margin-right: 2px; font-size: 1.15rem;"></i>
    <span id="/Java%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/10-%E9%81%BF%E5%85%8D%E6%B4%BB%E8%B7%83%E5%BA%A6%E5%8D%B1%E9%99%A9/" class="leancloud_visitors" data-flag-title="10.é¿å…æ´»è·ƒåº¦å±é™©">
      <em class="post-meta-item-text">é˜…è¯»é‡ </em>
      <i class="leancloud-visitors-count"></i>
    </span>

  </div>
  
  <div class="post-meta post-show-meta" style="margin-top: -10px;">
    <div style="display: flex; align-items: center;">
      <i class="iconfont icon-biaoqian" style="margin-right: 2px; font-size: 1.15rem;"></i>
      
      
        <a href="/tags/Java/" class="post-meta-link">Java</a>
      
      
      <span class="dot"></span>
      
        <a href="/tags/Javaå¹¶å‘/" class="post-meta-link">Javaå¹¶å‘</a>
      
      
      <span class="dot"></span>
      
        <a href="/tags/é¿å…æ´»è·ƒåº¦å±é™©/" class="post-meta-link">é¿å…æ´»è·ƒåº¦å±é™©</a>
      
    </div>
  </div>
  
  </header>
  <div id="section" class="post-content">
    <ul>
<li>å®‰å…¨æ€§å’Œæ´»è·ƒåº¦é€šå¸¸ç›¸äº’ç‰µåˆ¶ã€‚æˆ‘ä»¬ä½¿ç”¨é”æ¥ä¿è¯çº¿ç¨‹å®‰å…¨ï¼Œä½†æ˜¯æ»¥ç”¨é”å¯èƒ½å¼•èµ·**é”é¡ºåºæ­»é”(lock-ordering deadlock)**ã€‚</li>
<li>æˆ‘ä»¬ä½¿ç”¨çº¿ç¨‹æ± å’Œä¿¡å·é‡æ¥çº¦æŸèµ„æºçš„ä½¿ç”¨ï¼Œä½†æ˜¯å´ä¸èƒ½çŸ¥æ™“é‚£äº›ç®¡è¾–èŒƒå›´å†…çš„æ´»åŠ¨å¯èƒ½å½¢æˆçš„**èµ„æºæ­»é”(resource deadlock)**ã€‚</li>
<li>è¿™ä¸€ç« å°†è®²è¿°ä¸€äº›å¼•å‘æ´»è·ƒåº¦å¤±è´¥çš„åŸå› ï¼Œä»¥åŠé¿å…å‘ç”Ÿè¿™äº›å¤±è´¥çš„æ–¹æ³•ã€‚</li>
</ul>
<h2><span id="101-æ­»é”">10.1 æ­»é”</span></h2><ul>
<li>ç»å…¸çš„â€œå“²å­¦å®¶è¿›é¤é—®é¢˜â€å¾ˆå¥½çš„è§£é‡Šäº†æ­»é”ã€‚</li>
<li>å½“ä¸€ä¸ªçº¿ç¨‹æ°¸è¿œå æœ‰ä¸€ä¸ªé”ï¼Œè€Œå…¶ä»–çº¿ç¨‹å°è¯•å»è·å¾—è¿™ä¸ªé”ï¼Œé‚£ä¹ˆå®ƒä»¬å°†æ°¸è¿œè¢«é˜»å¡ã€‚å½“çº¿ç¨‹Aå æœ‰é”Læ—¶ï¼Œæƒ³è¦è·å¾—é”Mï¼Œä½†æ˜¯åŒæ—¶ï¼Œçº¿ç¨‹BæŒæœ‰Mï¼Œå¹¶å°è¯•è·å¾—Lï¼Œä¸¤ä¸ªçº¿ç¨‹å°†æ°¸è¿œç­‰å¾…ä¸‹å»ã€‚è¿™ç§æƒ…å†µæ˜¯æ­»é”æœ€ç®€å•çš„å½¢å¼(æˆ–ç§°**è‡´å‘½çš„æ‹¥æŠ±,deadly embrace)**ï¼Œå‘ç”Ÿåœ¨å¤šä¸ªçº¿ç¨‹å› ä¸ºç¯è·¯çš„é”ä¾èµ–å…³ç³»è€Œæ°¸è¿œç­‰å¾…çš„æƒ…å†µä¸‹ã€‚(æŠŠè¿™äº›çº¿ç¨‹å‡æƒ³ä¸ºæœ‰å‘å›¾çš„èŠ‚ç‚¹ï¼Œå›¾çš„è¾¹è¡¨ç°äº†è¿™ä¸ªå…³ç³»ï¼šçº¿ç¨‹Aç­‰å¾…çº¿ç¨‹Bå æœ‰çš„èµ„æºï¼Œå¦‚æœå›¾æœ€åè¿æˆäº†ä¸€ä¸ªç¯è·¯ï¼Œé‚£ä¹ˆæ­»é”ä¹Ÿå°±äº§ç”Ÿäº†ã€‚)</li>
<li>æ•°æ®åº“ç³»ç»Ÿçš„è®¾è®¡å°±é’ˆå¯¹äº†ç›‘æµ‹æ­»é”ï¼Œä»¥åŠä»æ­»é”ä¸­æ¢å¤ã€‚ä¸€ä¸ªäº‹åŠ¡å¯èƒ½éœ€è¦å–å¾—è®¸å¤šé”ï¼Œå¹¶å¯èƒ½ä¸€ç›´æŒæœ‰è¿™äº›é”ï¼Œç›´åˆ°æ‰€æœ‰äº‹åŠ¡æäº¤ã€‚å¦‚æ­¤è¯´æ¥ä¸¤ä¸ªäº‹åŠ¡éå¸¸æœ‰å¯èƒ½å‘ç”Ÿæ­»é”ï¼Œä½†è¿™å´å¹¶ä¸å¸¸è§ã€‚æ•°æ®åº“æœåŠ¡å™¨å½“å®ƒç›‘æµ‹åˆ°ä¸€ä¸ªäº‹åŠ¡é›†å‘ç”Ÿäº†æ­»é”ï¼Œå®ƒä¼šé€‰æ‹©ç‰ºç‰²è€…ï¼Œä½¿å®ƒé€€å‡ºäº‹åŠ¡ã€‚è¿™ä¸ªç‰ºç‰²è€…é‡Šæ”¾çš„èµ„æºï¼Œä½¿å¾—å…¶ä»–äº‹åŠ¡èƒ½å¤Ÿç»§ç»­è¿›è¡Œã€‚åº”ç”¨ç¨‹åºå¯ä»¥é‡æ–°æ‰§è¡Œé‚£ä¸ªè¢«å¼ºè¡Œé€€å‡ºçš„äº‹åŠ¡ï¼Œç°åœ¨è¿™ä¸ªäº‹åŠ¡å¯èƒ½å°±èƒ½å¤ŸæˆåŠŸå®Œæˆäº†ï¼Œå› ä¸ºæ‰€æœ‰è·Ÿå®ƒç«äº‰èµ„æºçš„äº‹åŠ¡éƒ½å·²ç»å®Œæˆäº†ã€‚</li>
<li>JVMåœ¨è§£å†³æ­»é”æ–¹é¢ä¸æ•°æ®åº“æœåŠ¡ä¸åŒï¼Œå½“ä¸€ä¸ªJavaçº¿ç¨‹é›†å‘ç”Ÿæ­»é”æ—¶ï¼Œè¿™äº›çº¿ç¨‹æ°¸è¿œä¸èƒ½ä½¿ç”¨äº†ã€‚æ¢å¤åº”ç”¨ç¨‹åºå¥åº·çš„å”¯ä¸€æ–¹å¼å°±æ˜¯ä¸­æ­¢å¹¶é‡å¯ï¼Œç„¶åå¯„å¸Œæœ›äºä¸è¦å†å‘ç”ŸåŒæ ·çš„äº‹æƒ…ã€‚</li>
<li>æ­»é”å‡ºç°å¾€å¾€åœ¨é«˜è´Ÿè½½ä¹‹ä¸‹ã€‚</li>
</ul>
<h3><span id="1011-é”é¡ºåºæ­»é”">10.1.1 é”é¡ºåºæ­»é”</span></h3><ul>
<li><p>ä»¥ä¸‹ä»£ç çš„LeftRightDeadlockå­˜åœ¨æ­»é”é£é™©ã€‚leftRightå’ŒrightLeftåˆ†åˆ«è·å¾—lefté”å’Œrighté”ã€‚å¦‚æœä¸€ä¸ªçº¿ç¨‹è°ƒç”¨äº†leftRightï¼Œå¦ä¸€ä¸ªçº¿ç¨‹è°ƒç”¨äº†rightLeftï¼Œé‚£ä¹ˆå¯èƒ½ä¼šå‘ç”Ÿæ­»é”ã€‚</p>
<pre><code>  //ç®€å•çš„é”é¡ºåºæ­»é”(ä¸è¦è¿™æ ·åš)
  public class LeftRightDeadlock &#123;
      private final Object left = new Object();
      private final Object right = new Object();

      public void leftRight() &#123;
          synchronized (left) &#123;
              synchronized (right) &#123;
                  doSomething();
              &#125;
          &#125;
      &#125;

      public void rightLeft() &#123;
          synchronized (right) &#123;
              synchronized (left) &#123;
                  doSomethingElse();
              &#125;
          &#125;
      &#125;
  &#125;</code></pre>
</li>
<li><p>LeftRightDeadlockå‘ç”Ÿæ­»é”çš„åŸå› æ˜¯:ä¸¤ä¸ªçº¿ç¨‹è¯•å›¾é€šè¿‡<strong>ä¸åŒçš„é¡ºåº</strong>è·å¾—å¤šä¸ªç›¸åŒçš„é”ã€‚å¦‚æœè¯·æ±‚çš„é¡ºåºç›¸åŒï¼Œå°±ä¸ä¼šå‡ºç°å¾ªç¯çš„é”ä¾èµ–ç°è±¡ï¼Œä¹Ÿå°±ä¸ä¼šäº§ç”Ÿæ­»é”äº†ã€‚</p>
<blockquote>
<p>å¦‚æœæ‰€æœ‰çº¿ç¨‹ä»¥é€šè¿‡çš„å›ºå®šç§©åºè·å¾—é”ï¼Œç¨‹åºå°±ä¸ä¼šå‡ºç°é”é¡ºåºæ­»é”é—®é¢˜äº†ã€‚</p>
</blockquote>
</li>
</ul>
<h3><span id="1012-åŠ¨æ€çš„é”é¡ºåºæ­»é”">10.1.2 åŠ¨æ€çš„é”é¡ºåºæ­»é”</span></h3><ul>
<li><p>ä»¥ä¸‹ä»£ç çœ‹ä¼¼æ— å®³ï¼Œå®ƒæŠŠèµ„é‡‘ä»ä¸€ä¸ªè´¦æˆ·è½¬å…¥å¦ä¸€ä¸ªè´¦æˆ·ã€‚åœ¨æ‰§è¡Œè½¬è´¦ä¹‹å‰è¦è·å¾—Accountå¯¹è±¡çš„é”ï¼Œä¸ºäº†è´¦ç›®çš„å¹³è¡¡è¦ä¿è¯æ›´æ–°æ“ä½œæ˜¯åŸå­åŒ–çš„ï¼ŒåŒæ—¶ä¸èƒ½ç ´åå›ºæœ‰çº¦æŸï¼Œæ¯”å¦‚ä¸€ä¸ªè´¦æˆ·çš„ä½™é¢ä¸èƒ½ä¸ºè´Ÿæ•°ã€‚</p>
<pre><code>  //åŠ¨æ€åŠ é”é¡ºåºäº§ç”Ÿçš„æ­»é”(ä¸è¦è¿™æ ·åš)
  public class DynamicOrderDeadlock &#123;
      // Warning: deadlock-prone!
      public static void transferMoney(Account fromAccount,
                                       Account toAccount,
                                       DollarAmount amount)
              throws InsufficientFundsException &#123;
          synchronized (fromAccount) &#123;
              synchronized (toAccount) &#123;
                  if (fromAccount.getBalance().compareTo(amount) &lt; 0)
                      throw new InsufficientFundsException();
                  else &#123;
                      fromAccount.debit(amount);
                      toAccount.credit(amount);
                  &#125;
              &#125;
          &#125;
      &#125;

      static class DollarAmount implements Comparable&lt;DollarAmount&gt; &#123;
          // Needs implementation

          public DollarAmount(int amount) &#123;
          &#125;

          public DollarAmount add(DollarAmount d) &#123;
              return null;
          &#125;

          public DollarAmount subtract(DollarAmount d) &#123;
              return null;
          &#125;

          public int compareTo(DollarAmount dollarAmount) &#123;
              return 0;
          &#125;
      &#125;

      static class Account &#123;
          private DollarAmount balance;
          private final int acctNo;
          private static final AtomicInteger sequence = new AtomicInteger();

          public Account() &#123;
              acctNo = sequence.incrementAndGet();
          &#125;

          void debit(DollarAmount d) &#123;
              balance = balance.subtract(d);
          &#125;

          void credit(DollarAmount d) &#123;
              balance = balance.add(d);
          &#125;

          DollarAmount getBalance() &#123;
              return balance;
          &#125;

          int getAcctNo() &#123;
              return acctNo;
          &#125;
      &#125;

      static class InsufficientFundsException extends Exception &#123;
      &#125;
  &#125;</code></pre>
</li>
<li><p>å¦‚æœä¸¤ä¸ªçº¿ç¨‹åŒæ—¶è°ƒç”¨transferMoneyï¼Œä¸€ä¸ªä»Xå‘Yè½¬è´¦ï¼Œå¦ä¸€ä¸ªä»Yå‘Xè½¬è´¦ï¼Œé‚£ä¹ˆå°±ä¼šå‘ç”Ÿæ­»é”ï¼š</p>
<ul>
<li>A:transferMoney(myAccount, yourAccount, 10);</li>
<li>B:transferMoney(yourAccount, myAccount, 20);</li>
</ul>
</li>
<li><p>åœ¨å¶å‘çš„æ—¶åºä¸­ï¼ŒAä¼šè·å¾—myAccountçš„é”ï¼Œå¹¶ç­‰å¾…yourAccountçš„é”ï¼Œç„¶è€ŒBæ­¤æ—¶æŒæœ‰yourAccountçš„é”ï¼Œæ­£åœ¨ç­‰å¾…myAccountçš„é”ã€‚</p>
</li>
<li><p>è¿™æ ·çš„æ­»é”å¯ä»¥é€šè¿‡è·å¾—é”æ—¶ï¼ŒæŸ¥çœ‹æ˜¯å¦åµŒå¥—æ¥æ£€æŸ¥ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¿…é¡»åˆ¶å®šé”çš„é¡ºåºï¼Œå¹¶ä¸”åœ¨æ•´ä¸ªåº”ç”¨ç¨‹åºä¸­ï¼Œè·å¾—é”éƒ½å¿…é¡»éµå®ˆè¿™ä¸ªæ—¢å®šçš„é¡ºåºã€‚</p>
</li>
<li><p>æˆ‘ä»¬åœ¨åˆ¶å®šå¯¹è±¡é¡ºåºçš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨System.indentityHashCodeè¿™æ ·ä¸€ç§æ–¹å¼ï¼Œå®ƒä¼šè¿”å›Object.hashCodeæ‰€è¿”å›çš„å€¼ã€‚ä»¥ä¸‹ä»£ç ä¸ºtransferMoneyçš„åˆä¸€ä¸ªç‰ˆæœ¬ï¼Œå®ƒä½¿ç”¨äº†System.identityHashCodeå®šä¹‰äº†é”çš„é¡ºåºã€‚è™½ç„¶å®ƒå¸¦æ¥äº†ä¸€äº›æ–°çš„ä»£ç ï¼Œä½†æ˜¯å®ƒèƒ½å¤Ÿå‡å°‘æ­»é”å‘ç”Ÿçš„å¯èƒ½æ€§ã€‚</p>
<pre><code>  //åˆ¶å®šé”çš„é¡ºåºæ¥é¿å…æ­»é”
  public class InduceLockOrder &#123;
      private static final Object tieLock = new Object();

      public void transferMoney(final Account fromAcct,
                                final Account toAcct,
                                final DollarAmount amount)
              throws InsufficientFundsException &#123;
          class Helper &#123;
              public void transfer() throws InsufficientFundsException &#123;
                  if (fromAcct.getBalance().compareTo(amount) &lt; 0)
                      throw new InsufficientFundsException();
                  else &#123;
                      fromAcct.debit(amount);
                      toAcct.credit(amount);
                  &#125;
              &#125;
          &#125;
          int fromHash = System.identityHashCode(fromAcct);
          int toHash = System.identityHashCode(toAcct);

          if (fromHash &lt; toHash) &#123;
              synchronized (fromAcct) &#123;
                  synchronized (toAcct) &#123;
                      new Helper().transfer();
                  &#125;
              &#125;
          &#125; else if (fromHash &gt; toHash) &#123;
              synchronized (toAcct) &#123;
                  synchronized (fromAcct) &#123;
                      new Helper().transfer();
                  &#125;
              &#125;
          &#125; else &#123;
              synchronized (tieLock) &#123;
                  synchronized (fromAcct) &#123;
                      synchronized (toAcct) &#123;
                          new Helper().transfer();
                      &#125;
                  &#125;
              &#125;
          &#125;
      &#125;

      interface DollarAmount extends Comparable&lt;DollarAmount&gt; &#123;
      &#125;

      interface Account &#123;
          void debit(DollarAmount d);

          void credit(DollarAmount d);

          DollarAmount getBalance();

          int getAcctNo();
      &#125;

      class InsufficientFundsException extends Exception &#123;
      &#125;
  &#125;</code></pre>
</li>
<li><p>è‹¥å‡ºç°å“ˆå¸Œå†²çªï¼Œä½¿ç”¨åŠ æ—¶èµ›é”ï¼Œä¿è¯ä¸€æ¬¡åªæœ‰ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œè¿™ä¸ªæœ‰é£é™©çš„æ“ä½œä»¥æœªçŸ¥çš„é¡ºåºè·å¾—é”ï¼Œä»è€Œå‡å°‘æ­»é”å‘ç”Ÿçš„å¯èƒ½æ€§ã€‚</p>
</li>
<li><p>å¦‚æœAccountå…·æœ‰å”¯ä¸€çš„ä¸å¯å˜çš„ï¼Œå¹¶ä¸”å…·æœ‰å¯æ¯”æ€§çš„keyï¼Œæ¯”å¦‚è´¦å·ï¼Œé‚£ä¹ˆåˆ¶å®šé”çš„é¡ºåºå°±æ›´åŠ å®¹æ˜“äº†ï¼šé€šè¿‡keyæ¥æ’å®šå¯¹è±¡é¡ºåºï¼Œè¿™æ ·èƒ½çœå»åŠ æ—¶èµ›é”çš„éœ€è¦ã€‚</p>
</li>
<li><p>æ­»é”åœ¨çœŸå®çš„ç³»ç»Ÿä¸­æ˜¯ä¸ªå¾ˆä¸¥é‡çš„é—®é¢˜ã€‚ä»¥ä¸‹ä»£ç åœ¨å¤§å¤šæ•°ç³»ç»Ÿä¸‹éƒ½ä¼šå¾ˆå¿«å‘ç”Ÿæ­»é”ã€‚</p>
<pre><code>  //å¼€å§‹ä¸€ä¸ªå¾ªç¯ï¼Œå®ƒåœ¨å…¸å‹æ¡ä»¶ä¸‹åˆ¶å®šæ­»é”
  public class DemonstrateDeadlock &#123;
      private static final int NUM_THREADS = 20;
      private static final int NUM_ACCOUNTS = 5;
      private static final int NUM_ITERATIONS = 1000000;

      public static void main(String[] args) &#123;
          final Random rnd = new Random();
          final Account[] accounts = new Account[NUM_ACCOUNTS];

          for (int i = 0; i &lt; accounts.length; i++)
              accounts[i] = new Account();

          class TransferThread extends Thread &#123;
              public void run() &#123;
                  for (int i = 0; i &lt; NUM_ITERATIONS; i++) &#123;
                      int fromAcct = rnd.nextInt(NUM_ACCOUNTS);
                      int toAcct = rnd.nextInt(NUM_ACCOUNTS);
                      DollarAmount amount = new DollarAmount(rnd.nextInt(1000));
                      try &#123;
                          DynamicOrderDeadlock.transferMoney(accounts[fromAcct], accounts[toAcct], amount);
                      &#125; catch (DynamicOrderDeadlock.InsufficientFundsException ignored) &#123;
                      &#125;
                  &#125;
              &#125;
          &#125;
          for (int i = 0; i &lt; NUM_THREADS; i++)
              new TransferThread().start();
      &#125;
  &#125;</code></pre>
</li>
</ul>
<h3><span id="1013-åä½œå¯¹è±¡é—´çš„æ­»é”">10.1.3 åä½œå¯¹è±¡é—´çš„æ­»é”</span></h3><ul>
<li><p>è·å–å¤šé‡çš„é”å¹¶ä¸æ€»æ˜¯åƒåœ¨LeftRightDeadlockæˆ–è€…transferMoneyä¸­é‚£ä¹ˆæ˜æ˜¾ï¼›å¯èƒ½ä¸æ˜¯åœ¨åŒä¸€ä¸ªæ–¹æ³•ä¸­è¯·æ±‚ä¸¤ä¸ªé”ã€‚ä»¥ä¸‹ä»£ç ä¸­ç›¸äº’åä½œçš„ç±»ï¼Œä»–å¯èƒ½ç”¨äºå‡ºç§Ÿè½¦è°ƒé£ç³»ç»Ÿã€‚Taxiä»£è¡¨ä¸ªä½“å‡ºç§Ÿè½¦ï¼Œå…·æœ‰ä½ç½®å’Œæ–¹å‘ä¸¤ä¸ªå±æ€§ï¼›dispatcherä»£è¡¨ä¸€ç»„å‡ºç§Ÿè½¦ã€‚</p>
<pre><code>  //åä½œå¯¹è±¡é—´çš„é”é¡ºåºæ­»é”(ä¸è¦è¿™æ ·åš)
  public class CooperatingDeadlock &#123;
      // Warning: deadlock-prone!
      class Taxi &#123;
          @GuardedBy(&quot;this&quot;) private Point location, destination;
          private final Dispatcher dispatcher;

          public Taxi(Dispatcher dispatcher) &#123;
              this.dispatcher = dispatcher;
          &#125;

          public synchronized Point getLocation() &#123;
              return location;
          &#125;

          public synchronized void setLocation(Point location) &#123;
              this.location = location;
              if (location.equals(destination))
                  dispatcher.notifyAvailable(this);
          &#125;

          public synchronized Point getDestination() &#123;
              return destination;
          &#125;

          public synchronized void setDestination(Point destination) &#123;
              this.destination = destination;
          &#125;
      &#125;

      class Dispatcher &#123;
          @GuardedBy(&quot;this&quot;) private final Set&lt;Taxi&gt; taxis;
          @GuardedBy(&quot;this&quot;) private final Set&lt;Taxi&gt; availableTaxis;

          public Dispatcher() &#123;
              taxis = new HashSet&lt;Taxi&gt;();
              availableTaxis = new HashSet&lt;Taxi&gt;();
          &#125;

          public synchronized void notifyAvailable(Taxi taxi) &#123;
              availableTaxis.add(taxi);
          &#125;

          public synchronized Image getImage() &#123;
              Image image = new Image();
              for (Taxi t : taxis)
                  image.drawMarker(t.getLocation());
              return image;
          &#125;
      &#125;

      class Image &#123;
          public void drawMarker(Point p) &#123;
          &#125;
      &#125;
  &#125;</code></pre>
</li>
<li><p>å°½ç®¡æ²¡æœ‰æ–¹æ³•æ˜¾å¼çš„è·å¾—ä¸¤ä¸ªé”ï¼Œä¸åŒçš„setLocationå’ŒgetImageçš„è°ƒç”¨è€…åŒæ ·å¯ä»¥è·å¾—ä¸¤ä¸ªé”ã€‚å¦‚æœä¸€ä¸ªçº¿ç¨‹è°ƒç”¨setLocationä½œä¸ºå¯¹GPSæ¥æ”¶å™¨æ›´æ–°çš„å“åº”ï¼Œå®ƒé¦–å…ˆæ›´æ–°å‡ºç§Ÿè½¦çš„ä½ç½®ï¼Œç„¶åæ£€æŸ¥å…¶æ˜¯å¦åˆ°è¾¾äº†ç›®çš„åœ°ï¼Œå¦‚æœå·²ç»åˆ°è¾¾ï¼Œé‚£ä¹ˆå®ƒä¼šé€šçŸ¥Dispatcherï¼Œå®ƒéœ€è¦ä¸€ä¸ªæ–°çš„ç›®æ ‡ã€‚å› ä¸ºsetLocationå’ŒnotifyAvailableéƒ½æ˜¯synchronizedæ–¹æ³•ï¼Œè°ƒç”¨setLocationçš„çº¿ç¨‹è·å–äº†Taxiçš„é”ï¼Œç„¶ååˆè·å–äº†Dispatcherçš„é”(ä¸€æ¬¡ä¸€ä¸ª)ã€‚æ­£å¦‚åœ¨LeftRightDeadlockä¸­å‘ç”Ÿçš„ï¼Œä¸¤ä¸ªé”è¢«ä¸¤ä¸ªçº¿ç¨‹ä»¥ä¸åŒé¡ºåºå æœ‰ï¼Œäº§ç”Ÿæ­»é”é£é™©ã€‚</p>
</li>
</ul>
<blockquote>
<p>åœ¨æŒæœ‰é”çš„æ—¶å€™è°ƒç”¨å¤–éƒ¨æ–¹æ³•æ˜¯åœ¨æŒ‘æˆ˜æ´»è·ƒåº¦é—®é¢˜ã€‚å¤–éƒ¨æ–¹æ³•å¯èƒ½ä¼šè·å¾—å…¶ä»–é”(äº§ç”Ÿæ­»é”çš„é£é™©)ï¼Œæˆ–è€…é­é‡ä¸¥é‡è¶…æ—¶çš„é˜»å¡ã€‚å½“ä½ æŒæœ‰é”çš„æ—¶å€™ä¼šå»¶è¿Ÿå…¶ä»–è¯•å›¾è·å¾—è¯¥é”çš„çº¿ç¨‹ã€‚</p>
</blockquote>
<h3><span id="1014-å¼€æ”¾è°ƒç”¨">10.1.4 å¼€æ”¾è°ƒç”¨</span></h3><ul>
<li><p>ç”±äºä¸èƒ½çŸ¥é“è°ƒç”¨çš„å¦ä¸€æ–¹å‘ç”Ÿçš„äº‹æƒ…ï¼Œ<strong>åœ¨æŒæœ‰é”çš„æ—¶å€™è°ƒç”¨ä¸€ä¸ªå¤–éƒ¨æ–¹æ³•å¾ˆéš¾è¿›è¡Œåˆ†æï¼Œå› æ­¤æ˜¯å±é™©çš„ã€‚</strong></p>
</li>
<li><p>å½“è°ƒç”¨çš„æ–¹æ³•ä¸éœ€è¦æŒæœ‰é”æ—¶ï¼Œè¿™è¢«ç§°ä¸º**å¼€æ”¾è°ƒç”¨(open call)**ï¼Œä¾èµ–äºå¼€æ”¾è°ƒç”¨çš„ç±»ä¼šå…·æœ‰æ›´å¥½çš„è¡Œä¸ºï¼Œå¹¶ä¸”æ¯”é‚£äº›éœ€è¦è·å¾—é”æ‰èƒ½è°ƒç”¨çš„æ–¹æ³•ç›¸æ¯”ï¼Œæ›´å®¹æ˜“ä¸å…¶å®ƒçš„ç±»åˆä½œã€‚</p>
</li>
<li><p>ä½¿ç”¨å¼€æ”¾è°ƒç”¨æ¥é¿å…æ­»é”ç±»ä¼¼äºä½¿ç”¨å°è£…æ¥æä¾›çº¿ç¨‹å®‰å…¨ï¼šå°½ç®¡æˆ‘ä»¬èƒ½å¤Ÿä¿è¯åœ¨æ²¡æœ‰å°è£…çš„æƒ…å†µä¸‹æ„å»ºçº¿ç¨‹å®‰å…¨çš„ç¨‹åºï¼Œä½†æ˜¯å¯¹ä¸€ä¸ªæœ‰æ•ˆå°è£…çš„ç±»è¿›è¡Œçº¿ç¨‹å®‰å…¨åˆ†æï¼Œè¦æ¯”åˆ†ææ²¡æœ‰å°è£…çš„ç±»å®¹æ˜“çš„å¤šã€‚ç±»ä¼¼çš„ï¼Œåˆ†æä¸€ä¸ªå®Œå…¨ä¾èµ–äºå¼€æ”¾è°ƒç”¨çš„ç¨‹åºçš„ç¨‹åºæ´»è·ƒåº¦ï¼Œæ¯”åˆ†æé‚£äº›éå¼€æ”¾è°ƒç”¨çš„ç¨‹åºæ›´ç®€å•ã€‚å°½é‡è®©ä½ è‡ªå·±ä½¿ç”¨å¼€æ”¾è°ƒç”¨ï¼Œè¿™è¦æ¯”è·å¾—å¤šé‡é”åè¯†åˆ«ä»£ç è·¯å¾„æ›´ç®€å•ï¼Œå› æ­¤å¯ä»¥ç¡®ä¿ä¸€è‡´çš„é¡ºåºè·å¾—é”ã€‚</p>
<pre><code>  //ä½¿ç”¨å¼€æ”¾è°ƒç”¨æ¥é¿å…åä½œå¯¹è±¡ä¹‹é—´çš„æ­»é”
  class CooperatingNoDeadlock &#123;
      @ThreadSafe
      class Taxi &#123;
          @GuardedBy(&quot;this&quot;) private Point location, destination;
          private final Dispatcher dispatcher;

          public Taxi(Dispatcher dispatcher) &#123;
              this.dispatcher = dispatcher;
          &#125;

          public synchronized Point getLocation() &#123;
              return location;
          &#125;

          public synchronized void setLocation(Point location) &#123;
              boolean reachedDestination;
              synchronized (this) &#123;
                  this.location = location;
                  reachedDestination = location.equals(destination);
              &#125;
              if (reachedDestination)
                  dispatcher.notifyAvailable(this);
          &#125;

          public synchronized Point getDestination() &#123;
              return destination;
          &#125;

          public synchronized void setDestination(Point destination) &#123;
              this.destination = destination;
          &#125;
      &#125;
  &#125;</code></pre>
</li>
</ul>
<blockquote>
<p>åœ¨ç¨‹åºä¸­å°½é‡ä½¿ç”¨å¼€æ”¾è°ƒç”¨ã€‚ä¾èµ–äºå¼€æ”¾è°ƒç”¨çš„ç¨‹åºï¼Œç›¸æ¯”é‚£äº›åœ¨æŒæœ‰é”çš„æ—¶å€™è¿˜è°ƒç”¨å¤–éƒ¨æ–¹æ³•çš„ç¨‹åºï¼Œæ›´å®¹æ˜“è¿›è¡Œæ­»é”è‡ªç”±åº¦çš„åˆ†æã€‚</p>
</blockquote>
<ul>
<li>é‡æ–°æ„å»ºsynchronizedå—æœ‰æ—¶ä¼šä½¿å¼€æ”¾è°ƒç”¨äº§ç”Ÿå‡ºä¹é¢„æ–™çš„ç»“æœï¼Œå› ä¸ºå®ƒä½¿å¾—ä¸€ä¸ªåŸå­æ“ä½œå˜ä¸ºéåŸå­æ“ä½œã€‚æœ‰æ—¶å€™ï¼Œè¿™æ ·æŸå¤±äº†åŸå­æ€§çš„æ“ä½œæ˜¯å®Œå…¨å¯ä»¥æ¥å—çš„ï¼›æ›´æ–°å‡ºç§Ÿè½¦çš„ä½ç½®ï¼Œå¹¶é€šçŸ¥åˆ†æ´¾ç¨‹åºè¿™è¾†è½¦å·²ç»å‡†å¤‡å¥½éšæ—¶å¾…å‘½ï¼Œè¿™ä¸¤ä»¶äº‹å¹¶ä¸éœ€è¦æˆä¸ºåŸå­æ“ä½œã€‚</li>
<li>ä½†æ˜¯æœ‰æ—¶åŸå­æ€§çš„æŸå¤±ä¼šå¼•å‘é—®é¢˜ï¼Œè¿™é‡Œä½ éœ€è¦ä½¿ç”¨å¦ä¸€ç§æŠ€æœ¯æ¥å®ç°åŸå­æ€§ã€‚æ„å»ºä¸€ä¸ªå¹¶å‘çš„å¯¹è±¡ã€‚è¿™èƒ½å¤Ÿé˜²æ­¢å…¶ä»–çº¿ç¨‹å°è¯•è¿›å…¥ï¼Œè¿™èƒœäºä½¿ç”¨é”æ¥é¿å…å…¶ä»–çº¿ç¨‹è¿›å…¥ä»£ç çš„ä¸´ç•ŒåŒºã€‚</li>
</ul>
<h3><span id="1015-èµ„æºæ­»é”">10.1.5 èµ„æºæ­»é”</span></h3><ul>
<li>å½“çº¿ç¨‹é—´ç›¸äº’ç­‰å¾…å¯¹æ–¹æŒæœ‰çš„é”ï¼Œå¹¶ä¸”è°éƒ½ä¸ä¼šé‡Šæ”¾è‡ªå·±çš„é”æ—¶å°±ä¼šå‘ç”Ÿæ­»é”ï¼Œå½“çº¿ç¨‹æŒæœ‰å’Œç­‰å¾…çš„ç›®æ ‡å˜ä¸ºèµ„æºæ—¶ï¼Œä¼šå‘ç”Ÿä¸ä¹‹ç±»ä¼¼çš„æ­»é”ã€‚</li>
<li>å‡è®¾ä½ æœ‰ä¸¤ä¸ªæ”¾å…¥æ± ä¸­çš„èµ„æºï¼Œæ¯”å¦‚åˆ†åˆ«æ˜¯åˆ°ä¸¤ä¸ªæ•°æ®åº“çš„è¿æ¥æ± ã€‚èµ„æºæ± é€šè¿‡ä¿¡å·é‡å®ç°ï¼Œå½“æ± ä¸ºç©ºçš„æ—¶å€™å‘ç”Ÿé˜»å¡ã€‚å¦‚æœä¸€ä¸ªä»»åŠ¡éœ€è¦è¿æ¥åˆ°ä¸¤ä¸ªæ•°æ®åº“ï¼Œå¹¶ä¸”ä¸¤ä¸ªèµ„æºå¹¶ä¸æ˜¯æŒ‰ç…§ç›¸åŒé¡ºåºè¿›è¡Œè°ƒç”¨çš„çš„ï¼Œçº¿ç¨‹Aå¯èƒ½æŒæœ‰è‡³æ•°æ®åº“D1çš„è¿æ¥ï¼Œå¹¶ç­‰å¾…è¿æ¥åˆ°æ•°æ®åº“D2ï¼Œè€Œçº¿ç¨‹BæŒæœ‰è‡³D2çš„è¿æ¥å¹¶ç­‰å¾…åˆ°D1çš„è¿æ¥ã€‚</li>
<li>å¦ä¸€ç§å½¢å¼çš„åŸºäºèµ„æºçš„æ­»é”æ˜¯çº¿ç¨‹é¥¥é¥¿æ­»é”ã€‚éœ€è¦ç­‰å¾…å…¶ä»–ä»»åŠ¡çš„ç»“æœçš„ä»»åŠ¡æ˜¯ç”Ÿæˆçº¿ç¨‹é¥¥é¥¿æ­»é”çš„æ¥æºï¼›æœ‰ç•Œæ± å’Œç›¸äº’ä¾èµ–çš„ä»»åŠ¡ä¸èƒ½æ”¾åœ¨ä¸€èµ·ä½¿ç”¨ã€‚</li>
</ul>
<h2><span id="102-é¿å…å’Œè¯Šæ–­æ­»é”">10.2 é¿å…å’Œè¯Šæ–­æ­»é”</span></h2><ul>
<li>å¦‚æœä¸€ä¸ªç¨‹åºä¸€æ¬¡è‡³å¤šè·å¾—ä¸€ä¸ªé”ï¼Œé‚£ä¹ˆå°±ä¸ä¼šäº§ç”Ÿé”é¡ºåºæ­»é”ã€‚å½“ç„¶è¿™å¹¶ä¸ç°å®ã€‚é”çš„é¡ºåºå¿…é¡»æ˜¯ä½ è®¾è®¡å·¥ä½œçš„ä¸€éƒ¨åˆ†ï¼šå°½é‡å‡å°‘æ½œåœ¨é”ä¹‹é—´çš„äº¤äº’æ•°é‡ï¼Œéµå®ˆå¹¶æ–‡æ¡£åŒ–è¯¥é”é¡ºåºåè®®ã€‚</li>
<li>åœ¨ä½¿ç”¨å®šä¹‰è‰¯å¥½çš„é”çš„ç¨‹åºä¸­ï¼Œç›‘æµ‹ä»£ç ä¸­æ­»é”è‡ªç”±åº¦çš„ç­–ç•¥åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼š<ul>
<li>é¦–å…ˆè¯†åˆ«ä»€ä¹ˆåœ°æ–¹ä¼šè·å–å¤šä¸ªé”ï¼Œå¯¹è¿™äº›ç¤ºä¾‹è¿›è¡Œå…¨å±€çš„åˆ†æï¼Œç¡®ä¿å®ƒä»¬é”çš„é¡ºåºåœ¨ç¨‹åºä¸­ä¿æŒä¸€è‡´ã€‚</li>
<li>å°½å¯èƒ½ä½¿ç”¨å¼€æ”¾è°ƒç”¨ï¼Œè¿™æ ·åšèƒ½å¤Ÿä»æ ¹æœ¬ä¸Šç®€åŒ–åˆ†æçš„éš¾åº¦ã€‚</li>
</ul>
</li>
</ul>
<h3><span id="1021-å°è¯•å®šæ—¶çš„é”">10.2.1 å°è¯•å®šæ—¶çš„é”</span></h3><ul>
<li>å¦ä¸€é¡¹ç›‘æµ‹æ­»é”å’Œä»æ­»é”ä¸­æ¢å¤çš„æŠ€æœ¯ï¼Œæ˜¯ä½¿ç”¨æ¯ä¸ªæ˜¾å¼Lockç±»å®šæ—¶tryLockç‰¹æ€§ï¼Œæ¥æ›¿ä»£ä½¿ç”¨å†…éƒ¨é”æœºåˆ¶ã€‚</li>
<li>åœ¨å†…éƒ¨é”çš„æœºåˆ¶ä¸­ï¼Œåªè¦æ²¡æœ‰è·å¾—é”ï¼Œå°±ä¼šæ°¸è¿œä¿æŒç­‰å¾…ï¼Œè€Œæ˜¾å¼çš„é”ä½¿ä½ èƒ½å¤Ÿå®šä¹‰è¶…æ—¶çš„æ—¶é—´ï¼Œåœ¨è§„å®šæ—¶é—´ä¹‹åtryLockè¿˜æ²¡æœ‰è·å¾—é”å°±è¿”å›å¤±è´¥ã€‚</li>
</ul>
<h3><span id="1022-é€šè¿‡çº¿ç¨‹è½¬å‚¨åˆ†ææ­»é”">10.2.2 é€šè¿‡çº¿ç¨‹è½¬å‚¨åˆ†ææ­»é”</span></h3><ul>
<li>é¢„é˜²æ­»é”æ˜¯ä½ é¢ä¸´çš„æœ€å¤§é—®é¢˜ï¼ŒJVMä½¿ç”¨**çº¿ç¨‹è½¬å‚¨(thread dump)**æ¥å¸®åŠ©ä½ è¯†åˆ«æ­»é”çš„å‘ç”Ÿã€‚çº¿ç¨‹è½¬å‚¨åŒ…æ‹¬<ul>
<li>æ¯ä¸ªè¿è¡Œä¸­çº¿ç¨‹çš„æ ˆè¿½è¸ªä¿¡æ¯ï¼Œ</li>
<li>ä»¥åŠä¸ä¹‹ç›¸ä¼¼å¹¶éšä¹‹å‘ç”Ÿçš„å¼‚å¸¸ã€‚</li>
<li>é”çš„ä¿¡æ¯ï¼Œæ¯”å¦‚å“ªä¸ªé”ç”±å“ªä¸ªçº¿ç¨‹è·å¾—ï¼Œå…¶ä¸­è·å¾—è¿™äº›é”çš„æ ˆç»“æ„ï¼Œä»¥åŠé˜»å¡çº¿ç¨‹æ­£åœ¨ç­‰å¾…çš„é”ç©¶ç«Ÿæ˜¯å“ªä¸€ä¸ªã€‚</li>
</ul>
</li>
</ul>
<h2><span id="103-å…¶ä»–çš„æ´»è·ƒåº¦å±é™©">10.3 å…¶ä»–çš„æ´»è·ƒåº¦å±é™©</span></h2><ul>
<li>å°½ç®¡æ­»é”ä½¿æˆ‘ä»¬é‡åˆ°çš„æœ€ä¸»è¦çš„æ´»è·ƒåº¦å±é™©ï¼Œå¹¶å‘ç¨‹åºä¸­ä»ç„¶å¯èƒ½é‡åˆ°ä¸€äº›å…¶ä»–çš„æ´»è·ƒåº¦å±é™©ï¼ŒåŒ…æ‹¬ï¼šé¥¥é¥¿ï¼Œä¸¢å¤±ä¿¡å·å’Œæ´»é”ã€‚</li>
</ul>
<h3><span id="1031-é¥¥é¥¿">10.3.1 é¥¥é¥¿</span></h3><ul>
<li>å½“çº¿ç¨‹è®¿é—®å®ƒæ‰€éœ€è¦çš„èµ„æºæ—¶å´è¢«æ°¸ä¹…æ‹’ç»ï¼Œä»¥è‡³äºä¸èƒ½å†ç»§ç»­è¿›è¡Œï¼Œè¿™æ ·å°±å‘ç”Ÿäº†**é¥¥é¥¿(starvation)**ï¼›æœ€å¸¸è§çš„å¼•å‘é¥¥é¥¿çš„èµ„æºæ˜¯CPUå‘¨æœŸã€‚åœ¨Javaåº”ç”¨ç¨‹åºä¸­ï¼Œä½¿ç”¨çº¿ç¨‹çš„ä¼˜å…ˆçº§ä¸å½“å¯èƒ½å¼•èµ·é¥¥é¥¿ã€‚åœ¨é”ä¸­æ‰§è¡Œæ— ç»ˆæ­¢çš„æ„å»ºä¹Ÿå¯èƒ½å¼•èµ·é¥¥é¥¿(æ— é™å¾ªç¯ï¼Œæˆ–è€…æ— å°½ç­‰å¾…èµ„æº)ï¼Œå› ä¸ºå…¶ä»–éœ€è¦è¿™ä¸ªé”çš„çº¿ç¨‹æ°¸è¿œä¸å¯èƒ½å¾—åˆ°å®ƒã€‚</li>
<li>çº¿ç¨‹APIå®šä¹‰äº†æ˜¯ä¸ªä¼˜å…ˆçº§çº§åˆ«ï¼Œå¹¶å¯¹åº”åˆ°æ“ä½œç³»ç»Ÿå“åº”çš„è°ƒåº¦ä¼˜å…ˆçº§ä¸­ã€‚</li>
</ul>
<blockquote>
<p>æŠµåˆ¶ä½¿ç”¨çº¿ç¨‹ä¼˜å…ˆçº§çš„è¯±æƒ‘ï¼Œå› ä¸ºè¿™ä¼šå¢åŠ å¹³å°ä¾èµ–æ€§ï¼Œå¹¶ä¸”å¯èƒ½å¼•èµ·æ´»è·ƒåº¦é—®é¢˜ï¼Œå¤§å¤šæ•°å¹¶å‘åº”ç”¨ç¨‹åºå¯ä»¥å¯¹æ‰€æœ‰çº¿ç¨‹ä½¿ç”¨ç›¸åŒçš„ä¼˜å…ˆçº§ã€‚</p>
</blockquote>
<h3><span id="1032-å¼±å“åº”æ€§">10.3.2 å¼±å“åº”æ€§</span></h3><ul>
<li>é™¤é¥¥é¥¿ä»¥å¤–çš„å¦ä¸€ä¸ªé—®é¢˜æ˜¯å¼±å“åº”æ€§ï¼Œåœ¨GUIåº”ç”¨ç¨‹åºä¸­ä½¿ç”¨çš„åå°çº¿ç¨‹çš„æƒ…å†µä¸‹ï¼Œè¿™æ˜¯å¾ˆå¸¸è§çš„ã€‚æŠŠè€—æ—¶ä»»åŠ¡åˆ†è½½åˆ°åå°çº¿ç¨‹ä¸­ï¼Œè¿™æ ·å°±ä¸ä¼šé€ æˆç”¨æˆ·ç•Œé¢å†»ç»“äº†ã€‚</li>
<li>CPUå¯†é›†å‹çš„åå°ä»»åŠ¡ä¼šå½±å“å“åº”æ€§ï¼Œå› ä¸ºå®ƒä»¬ä¼šä¸äº‹ä»¶çº¿ç¨‹å…±åŒç«äº‰CPUçš„å¾®å‘¨æœŸã€‚</li>
<li>ä¸è‰¯çš„é”ç®¡ç†ä¹Ÿå¯èƒ½å¼•èµ·å¼±å“åº”æ€§ã€‚å¦‚æœä¸€ä¸ªçº¿ç¨‹é•¿æ—¶é—´å æœ‰ä¸€ä¸ªé”ï¼Œå…¶ä»–æƒ³è¦è®¿é—®è¯¥å®¹å™¨çš„çº¿ç¨‹å°±å¿…é¡»ç­‰å¾…å¾ˆé•¿äº‹ä»¶ã€‚</li>
</ul>
<h3><span id="1033-æ´»é”">10.3.3 æ´»é”</span></h3><ul>
<li>**æ´»é”(livelock)**æ˜¯çº¿ç¨‹ä¸­æ´»è·ƒåº¦å¤±è´¥çš„å¦ä¸€ç§å½¢å¼ï¼Œå°½ç®¡æ²¡æœ‰è¢«é˜»å¡ï¼Œçº¿ç¨‹å´ä»ç„¶ä¸èƒ½ç»§ç»­ï¼Œå› ä¸ºå®ƒä¸æ–­é‡è¯•ç›¸åŒçš„æ“ä½œï¼Œå´æ€»æ˜¯å¤±è´¥ã€‚</li>
<li>æ´»é”é€šå¸¸å‘ç”Ÿåœ¨æ¶ˆæ¯å¤„ç†åº”ç”¨ç¨‹åºä¸­ï¼Œå¦‚æœæ¶ˆæ¯å¤„ç†å¤±è´¥çš„è¯ï¼Œå…¶ä¸­ä¼ é€’æ¶ˆæ¯çš„åº•å±‚æ¶æ„ä¼šå›é€€æ•´ä¸ªäº‹åŠ¡ï¼Œå¹¶æŠŠå®ƒç½®å›é˜Ÿé¦–ã€‚å¦‚æœæ¶ˆæ¯å¤„ç†ç¨‹åºå¯¹æŸç§ç‰¹å®šç±»å‹çš„æ¶ˆæ¯å¤„ç†å­˜åœ¨bugï¼Œæ¯æ¬¡å¤„ç†éƒ½ä¼šå¤±è´¥ï¼Œé‚£ä¹ˆæ¯ä¸€æ¬¡è¿™ä¸ªæ¶ˆæ¯éƒ½ä¼šè¢«ä»é˜Ÿåˆ—ä¸­å–å‡ºï¼Œä¼ é€’åˆ°å­˜åœ¨é—®é¢˜çš„å¤„ç†å™¨ï¼Œç„¶åå‘ç”Ÿäº‹åŠ¡å›é€€ã€‚å› ä¸ºè¿™æ¡æ¶ˆæ¯åˆä¼šåˆ°é˜Ÿé¦–ï¼Œå¤„ç†å™¨ä¼šä¸æ–­è¢«è¿™æ ·é‡å¤è°ƒç”¨ï¼Œå¹¶è¿”å›é‡å¤ç»“æœã€‚è¿™å°±æ˜¯é€šå¸¸æˆä¸º**æ¯’è¯ä¿¡æ¯(poison message)**çš„é—®é¢˜ã€‚ä¿¡æ¯å¤„ç†çº¿ç¨‹å¹¶æ²¡æœ‰å‘ç”Ÿé˜»å¡ï¼Œä½†æ˜¯æ°¸è¿œéƒ½ä¸ä¼šå‰è¿›äº†ã€‚è¿™ç§å½¢å¼çš„æ´»é”é€šå¸¸æ¥æºäºè¿‡æ¸¡çš„çš„é”™è¯¯æ¢å¤ä»£ç ï¼Œè¯¯å°†ä¸å¯ä¿®å¤çš„é”™è¯¯å½“åšæ˜¯å¯ä¿®å¤çš„é”™è¯¯ã€‚</li>
<li>æ´»é”åŒæ ·å‘ç”Ÿåœ¨å¤šä¸ªç›¸äº’åä½œçš„çº¿ç¨‹é—´ï¼Œå½“å®ƒä»¬ä¸ºäº†å½¼æ­¤é—´å“åº”è€Œä¿®æ”¹äº†çŠ¶æ€ï¼Œä½¿å¾—æ²¡æœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½å¤Ÿç»§ç»­å‰è¿›ï¼Œé‚£ä¹ˆå°±å‘ç”Ÿäº†æ´»é”ã€‚è¿™å¥½æ¯”ä¸¤ä¸ªè¿‡äºç¤¼è²Œçš„äººåœ¨åŠè·¯ç›¸é‡ï¼šä»–ä»¬éƒ½é¿å¼€å¯¹æ–¹çš„è·¯ï¼Œäºæ˜¯åœ¨å¦å¤–ä¸€æ¡è·¯ä¸Šåˆç›¸é‡äº†ã€‚æ‰€ä»¥å°±è¿™æ ·ä¸åœåœ°ä¸€ç›´é¿è®©ä¸‹å»äº†â€¦</li>
<li>è§£å†³è¿™äº›å¤šæ ·çš„æ´»é”çš„ä¸€ç§æ–¹æ¡ˆæ˜¯å¯¹é‡è¯•æœºåˆ¶å¼•å…¥ä¸€äº›éšæœºæ€§ã€‚<ul>
<li>ä¾‹å¦‚ï¼Œåœ¨ä»¥å¤ªç½‘ç»œä¸Šï¼Œä¸¤ä¸ªåŸºç«™å°è¯•ä½¿ç”¨ç›¸åŒçš„è½½æ³¢å‘é€æ•°æ®åŒ…ï¼ŒåŒ…ä¼šå‘é€å†²çªã€‚åŸºç«™å‘ç°äº†å†²çªï¼Œå¹¶ä¸”éƒ½åœ¨ç¨åé‡å‘ã€‚å¦‚æœå®ƒä»¬éƒ½éå¸¸ç²¾ç¡®åœ°åœ¨ä¸€ç§’åé‡è¯•ï¼Œå®ƒä»¬åˆä¼šå‘é€å†²çªï¼Œå¹¶ä¸æ–­å†²çªä¸‹å»ï¼Œå¯¼è‡´æ•°æ®åŒ…æ°¸è¿œä¸èƒ½å‘é€ï¼Œå³ä½¿æœ‰å¤§é‡çš„å¸¦å®½éƒ½æ˜¯é—²ç½®çš„ã€‚</li>
<li>ä¸ºäº†é¿å…è¿™ç§æƒ…å†µå‘ç”Ÿï¼Œæˆ‘ä»¬é€šè¿‡ç”¨ä¸€ä¸ªéšæœºç»„ä»¶ä½¿å®ƒä»¬è¿›è¡Œç­‰å¾…ã€‚</li>
</ul>
</li>
<li>åœ¨å¹¶å‘ç¨‹åºä¸­ï¼Œé€šè¿‡éšæœºç­‰å¾…å’Œæ’¤å›æ¥è¿›è¡Œé‡è¯•èƒ½å¤Ÿç›¸å½“æœ‰æ•ˆåœ°é¿å…æ´»é”çš„å‘ç”Ÿã€‚</li>
</ul>
<h2><span id="summary">summary</span></h2><ul>
<li>æ´»è·ƒåº¦å¤±è´¥æ˜¯å¾ˆä¸¥é‡çš„é—®é¢˜ï¼Œå› ä¸ºé™¤äº†çŸ­æ—¶é—´åœ°ä¸­æ­¢åº”ç”¨ç¨‹åºï¼Œæ²¡æœ‰ä»»ä½•æœºåˆ¶å¯ä»¥æ¢å¤è¿™ç§å¤±è´¥ã€‚</li>
<li>æœ€å¸¸è§çš„æ´»è·ƒåº¦å¤±è´¥æ˜¯é”é¡ºåºæ­»é”ã€‚åº”è¯¥åœ¨è®¾è®¡æ—¶å°±é¿å…é”é¡ºåºæ­»é”ï¼šç¡®ä¿å¤šä¸ªçº¿ç¨‹åœ¨è·å¾—å¤šä¸ªé”æ—¶ï¼Œä½¿ç”¨ä¸€è‡´çš„é¡ºåºã€‚</li>
<li>æœ€å¥½çš„è§£å†³æ–¹æ³•æ˜¯åœ¨ç¨‹åºä¸­ä½¿ç”¨å¼€æ”¾è°ƒç”¨ã€‚è¿™ä¼šå¤§å¤§å‡å°‘ä¸€ä¸ªçº¿ç¨‹ä¸€æ¬¡è¯·æ±‚å¤šä¸ªé”çš„æƒ…å†µï¼Œå¹¶ä¸”ä½¿è¿™æ ·çš„å¤šé‡é”è¯·æ±‚çš„å‘ç”Ÿæ›´åŠ æ˜æ˜¾ã€‚</li>
</ul>
<p></p>


  </div>
  <div>
  
  <div class="post-note note-warning copyright" style="margin-top: 42px">
    <p><span style="font-weight: bold;">ä½œè€…ï¼š</span><a target="_blank" rel="nofollow noopener noreferrer" href="https://java4u.cn/about">ç™½è‰²èœ—ç‰›</a></p>
    <p><span style="font-weight: bold;">æ–‡ç« é“¾æ¥ï¼š</span><a target="_blank" rel="nofollow noopener noreferrer" href="https://java4u.cn/Java%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/10-%E9%81%BF%E5%85%8D%E6%B4%BB%E8%B7%83%E5%BA%A6%E5%8D%B1%E9%99%A9/">https://java4u.cn/Java%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/10-%E9%81%BF%E5%85%8D%E6%B4%BB%E8%B7%83%E5%BA%A6%E5%8D%B1%E9%99%A9/</a></p>
    <p><span style="font-weight: bold;">ç‰ˆæƒå£°æ˜ï¼š</span>æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨<a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">CC BY-NC-SA 4.0 åè®®</a>ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼</p>
  </div>
  
  </div>
</article>
<div class="nav">
  
  <div class="nav-item-prev">
    <a href="/Javaå¹¶å‘ç¼–ç¨‹/11-æ€§èƒ½å’Œå¯ä¼¸ç¼©æ€§/" class="nav-link">
      <i class="iconfont icon-left nav-prev-icon"></i>
      <div>
        <div class="nav-label">ä¸Šä¸€ç¯‡</div>
        
        <div class="nav-title">11.æ€§èƒ½å’Œå¯ä¼¸ç¼©æ€§ </div>
        
      </div>
    </a>
  </div>
  
  
  <div class="nav-item-next">
    <a href="/Javaå¹¶å‘ç¼–ç¨‹/09-GUIåº”ç”¨ç¨‹åº/" class="nav-link">
      <div>
        <div class="nav-label">ä¸‹ä¸€ç¯‡</div>
        
        <div class="nav-title">09.GUIåº”ç”¨ç¨‹åº </div>
        
      </div>
      <i class="iconfont icon-right nav-next-icon"></i>
    </a>
  </div>
  
</div>

<div class="card card-content comment-card" style="margin-top: 16px;">
  <div class="comment-card-title">è¯„è®º</div>
  
  <div id="vcomments"></div>
  
  <script>
    loadScript("https://cdn.jsdelivr.net/npm/valine@1.4.14/dist/Valine.min.js");
    var oldLoadVa = window.onload;
    window.onload = function () {
      oldLoadVa && oldLoadVa();
      new Valine({
        el: '#vcomments',
        appId: 'Ro9jzghVgwRgtnGQQ99MFbAK-9Nh9j0Va',
        appKey: 'rbA6uGwupFqEcTUAugUoXn2B',
        placeholder: 'ç•™ä¸‹ä½ çš„è¶³è¿¹å§~ä¹Ÿå¯ä»¥åŠ æˆ‘å¾®ä¿¡ 919201148ï¼Œäº’æ¢å‹é“¾~~~',
        path: window.location.pathname,
        avatar: 'robohash',
        meta: ["nick","mail","link"],
        pageSize: '10',
        lang: '',
        visitor: 'true',
        highlight: true,
        recordIP: false,
        
        
        
        enableQQ: 'false',
        requiredFields: [],
      });
    };
  </script>

</div>

<div class="card card-content toc-card" id="mobiletoc">
  <div class="toc-header"><i class="iconfont icon-menu" style="padding-right: 2px;"></i>ç›®å½•</div>
<ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-text">10.1 æ­»é”</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">10.1.1 é”é¡ºåºæ­»é”</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">10.1.2 åŠ¨æ€çš„é”é¡ºåºæ­»é”</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">10.1.3 åä½œå¯¹è±¡é—´çš„æ­»é”</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">10.1.4 å¼€æ”¾è°ƒç”¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">10.1.5 èµ„æºæ­»é”</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-text">10.2 é¿å…å’Œè¯Šæ–­æ­»é”</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">10.2.1 å°è¯•å®šæ—¶çš„é”</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">10.2.2 é€šè¿‡çº¿ç¨‹è½¬å‚¨åˆ†ææ­»é”</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-text">10.3 å…¶ä»–çš„æ´»è·ƒåº¦å±é™©</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">10.3.1 é¥¥é¥¿</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">10.3.2 å¼±å“åº”æ€§</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">10.3.3 æ´»é”</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-text">summary</span></a></li></ol>
</div>

<!-- ç™¾åº¦è‡ªåŠ¨æ¨é€é“¾æ¥-->
<script>
  (function(){
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();
  </script>
  </main>
          <aside class="left-column">
            
            <div class="card card-author">
              
<img src="/img/logo.jpg" class="author-img">

<p class="author-name">èœ—ç‰› Java ä¹‹å®¶</p>
<p class="author-description">Java ç¨‹åºå‘˜çš„æˆé•¿è¿›é˜¶ç¤¾åŒº</br>(Java for You)ã€‚</p>
<div class="author-message">
  <a class="author-posts-count" href="/archives">
    <span>107</span>
    <span>æ–‡ç« </span>
  </a>
  <a class="author-categories-count" href="/categories">
    <span>11</span>
    <span>åˆ†ç±»</span>
  </a>
  <a class="author-tags-count" href="/tags">
    <span>118</span>
    <span>æ ‡ç­¾</span>
  </a>
</div>

<div class="author-card-society">
  
    <div class="author-card-society-icon">
      <a target="_blank" rel="noopener" href="https://gitee.com/java4u/resources/raw/master/global/gh_woniu.png">
        <i class="iconfont icon-wechat society-icon"></i>
      </a>
    </div>
  
    <div class="author-card-society-icon">
      <a target="_blank" rel="noopener" href="https://github.com/huayonglun/">
        <i class="iconfont icon-github society-icon"></i>
      </a>
    </div>
  
    <div class="author-card-society-icon">
      <a target="_blank" rel="noopener" href="http://weibo.com/huayonglun">
        <i class="iconfont icon-sina society-icon"></i>
      </a>
    </div>
  
</div>

            </div>
            
            <div class="sticky-tablet">
  
  
  <article class="display-when-two-columns spacer">
    <div class="card card-content toc-card">
      <div class="toc-header"><i class="iconfont icon-menu" style="padding-right: 2px;"></i>ç›®å½•</div>
<ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-text">10.1 æ­»é”</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">10.1.1 é”é¡ºåºæ­»é”</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">10.1.2 åŠ¨æ€çš„é”é¡ºåºæ­»é”</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">10.1.3 åä½œå¯¹è±¡é—´çš„æ­»é”</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">10.1.4 å¼€æ”¾è°ƒç”¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">10.1.5 èµ„æºæ­»é”</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-text">10.2 é¿å…å’Œè¯Šæ–­æ­»é”</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">10.2.1 å°è¯•å®šæ—¶çš„é”</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">10.2.2 é€šè¿‡çº¿ç¨‹è½¬å‚¨åˆ†ææ­»é”</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-text">10.3 å…¶ä»–çš„æ´»è·ƒåº¦å±é™©</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">10.3.1 é¥¥é¥¿</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">10.3.2 å¼±å“åº”æ€§</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">10.3.3 æ´»é”</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-text">summary</span></a></li></ol>
    </div>
  </article>
  
  
  <article class="card card-content categories-widget">
    <div class="categories-card">
  <div class="categories-header"><i class="iconfont icon-fenlei" style="padding-right: 2px;"></i>åˆ†ç±»</div>
  <div class="categories-list">
    
      <a href="/categories/æ•™ç¨‹">
        <div class="categories-list-item">
          æ•™ç¨‹
          <span class="categories-list-item-badge">3</span>
        </div>
      </a>
    
      <a href="/categories/Java">
        <div class="categories-list-item">
          Java
          <span class="categories-list-item-badge">14</span>
        </div>
      </a>
    
      <a href="/categories/Javaå¹¶å‘ç¼–ç¨‹">
        <div class="categories-list-item">
          Javaå¹¶å‘ç¼–ç¨‹
          <span class="categories-list-item-badge">18</span>
        </div>
      </a>
    
      <a href="/categories/Linux">
        <div class="categories-list-item">
          Linux
          <span class="categories-list-item-badge">1</span>
        </div>
      </a>
    
      <a href="/categories/spring">
        <div class="categories-list-item">
          spring
          <span class="categories-list-item-badge">21</span>
        </div>
      </a>
    
      <a href="/categories/struts2">
        <div class="categories-list-item">
          struts2
          <span class="categories-list-item-badge">16</span>
        </div>
      </a>
    
      <a href="/categories/å¤¯å®åŸºç¡€ç³»åˆ—">
        <div class="categories-list-item">
          å¤¯å®åŸºç¡€ç³»åˆ—
          <span class="categories-list-item-badge">4</span>
        </div>
      </a>
    
      <a href="/categories/æ€ç»´">
        <div class="categories-list-item">
          æ€ç»´
          <span class="categories-list-item-badge">2</span>
        </div>
      </a>
    
      <a href="/categories/æ•°æ®åº“">
        <div class="categories-list-item">
          æ•°æ®åº“
          <span class="categories-list-item-badge">2</span>
        </div>
      </a>
    
      <a href="/categories/ç®—æ³•">
        <div class="categories-list-item">
          ç®—æ³•
          <span class="categories-list-item-badge">25</span>
        </div>
      </a>
    
      <a href="/categories/ç½‘ç»œ">
        <div class="categories-list-item">
          ç½‘ç»œ
          <span class="categories-list-item-badge">1</span>
        </div>
      </a>
    
  </div>
</div>
  </article>
  
  <article class="card card-content tags-widget">
    <div class="tags-card">
  <div class="tags-header"><i class="iconfont icon-biaoqian" style="padding-right: 2px;"></i>çƒ­é—¨æ ‡ç­¾</div>
  <div class="tags-list">
    
    <a href="\tags\Java" title="Java"><div class="tags-list-item">Java</div></a>
    
    <a href="\tags\ssh" title="ssh"><div class="tags-list-item">ssh</div></a>
    
    <a href="\tags\spring" title="spring"><div class="tags-list-item">spring</div></a>
    
    <a href="\tags\Javaå¹¶å‘" title="Javaå¹¶å‘"><div class="tags-list-item">Javaå¹¶å‘</div></a>
    
    <a href="\tags\struts2" title="struts2"><div class="tags-list-item">struts2</div></a>
    
    <a href="\tags\bean" title="bean"><div class="tags-list-item">bean</div></a>
    
    <a href="\tags\æ ‘" title="æ ‘"><div class="tags-list-item">æ ‘</div></a>
    
    <a href="\tags\AOP" title="AOP"><div class="tags-list-item">AOP</div></a>
    
    <a href="\tags\åˆ†å¸ƒå¼" title="åˆ†å¸ƒå¼"><div class="tags-list-item">åˆ†å¸ƒå¼</div></a>
    
    <a href="\tags\é“¾è¡¨" title="é“¾è¡¨"><div class="tags-list-item">é“¾è¡¨</div></a>
    
    <a href="\tags\è£…é…å±æ€§" title="è£…é…å±æ€§"><div class="tags-list-item">è£…é…å±æ€§</div></a>
    
    <a href="\tags\é›†åˆ" title="é›†åˆ"><div class="tags-list-item">é›†åˆ</div></a>
    
    <a href="\tags\äºŒå‰æ ‘" title="äºŒå‰æ ‘"><div class="tags-list-item">äºŒå‰æ ‘</div></a>
    
    <a href="\tags\æŸ¥æ‰¾" title="æŸ¥æ‰¾"><div class="tags-list-item">æŸ¥æ‰¾</div></a>
    
    <a href="\tags\æ’åº" title="æ’åº"><div class="tags-list-item">æ’åº</div></a>
    
    <a href="\tags\åŒæ­¥" title="åŒæ­¥"><div class="tags-list-item">åŒæ­¥</div></a>
    
  </div>
</div>
  </article>
  
  
</div>
          </aside>
          <aside class="right-column">
            <div class="sticky-widescreen">

  <!-- æˆ‘çš„å…¬ä¼—å· -->
  
  <article class="card card-content toc-card">
    <div style="float: left; ">
      <img class="adv" style="width: 100%; height: 100%; border: solid 1px #ddd;" src="https://gitee.com/java4u/resources/raw/master/2020-12-17/1608142536200-image.png">
    </div>
    <div style="float: left; margin-left: 17px; margin-top: 12px;">
        <div style="font-size: 18px; margin-bottom: 12px;color:#159957;"><b>å¾®ä¿¡æœä¸€æœ: èœ—ç‰›äº’è”ç½‘</b></div>
        <small style="font-size: 0.9em;">
          ğŸ‘‰ã€Œ<a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/OyboCy8Drh8AWNqE_DUROg">æŠ€æœ¯å¹²è´§</a>ã€æ¯å‘¨æ¨é€<br>
          ğŸ‘‰ã€Œ<a href="https://java4u.cn/resources/">å…è´¹èµ„æ–™</a>ã€éšæ—¶é¢†å–<br>
          ğŸ‘‰ã€Œ<a target="_blank" rel="noopener" href="https://gitee.com/java4u/resources/raw/master/2020-12-17/1608143152021-image.png">ä¼˜è´¨ç¤¾ç¾¤</a>ã€éšæ—¶åŠ å…¥<br>
        </small>
    </div>
    <div style="clear: both;"></div>
    <div style="font-size: 0.8em; margin: 15px 0 15px 0;">
      <a href="" target="_blank" style="color:#159957;font-size: 14px;" rel="noopener noreferrer">æ‰«æä¸Šæ–¹äºŒç»´ç ï¼Œå…³æ³¨æˆ‘çš„å…¬ä¼—å·</a>
      <br>
    </div>
  </article>


  
  
  <article class="card card-content toc-card">
    <div class="toc-header"><i class="iconfont icon-menu" style="padding-right: 2px;"></i>ç›®å½•</div>
<ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-text">10.1 æ­»é”</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">10.1.1 é”é¡ºåºæ­»é”</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">10.1.2 åŠ¨æ€çš„é”é¡ºåºæ­»é”</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">10.1.3 åä½œå¯¹è±¡é—´çš„æ­»é”</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">10.1.4 å¼€æ”¾è°ƒç”¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">10.1.5 èµ„æºæ­»é”</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-text">10.2 é¿å…å’Œè¯Šæ–­æ­»é”</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">10.2.1 å°è¯•å®šæ—¶çš„é”</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">10.2.2 é€šè¿‡çº¿ç¨‹è½¬å‚¨åˆ†ææ­»é”</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-text">10.3 å…¶ä»–çš„æ´»è·ƒåº¦å±é™©</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">10.3.1 é¥¥é¥¿</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">10.3.2 å¼±å“åº”æ€§</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">10.3.3 æ´»é”</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-text">summary</span></a></li></ol>
  </article>
  

  
  <article class="card card-content">
    <div class="recent-posts-card">
  <div class="recent-posts-header"><i class="iconfont icon-wenzhang_huaban" style="padding-right: 2px;"></i>æœ€è¿‘æ–‡ç« </div>
  <div class="recent-posts-list">
    
      <div class="recent-posts-item">
        <div class="recent-posts-item-title">2020-12-15</div>
        <a href="/course/cai_yun_xiao_yi/"><div class="recent-posts-item-content">å½©äº‘å°è¯‘ï¼šæœ€ä½³çš„ç½‘é¡µç¿»è¯‘æ’ä»¶</div></a>
      </div>
    
      <div class="recent-posts-item">
        <div class="recent-posts-item-title">2020-12-14</div>
        <a href="/course/markmap/"><div class="recent-posts-item-content">æœ€ä½³çš„æ€ç»´å¯¼å›¾ç”Ÿæˆå·¥å…·ï¼š markmap ä½¿ç”¨æ•™ç¨‹</div></a>
      </div>
    
      <div class="recent-posts-item">
        <div class="recent-posts-item-title">2020-12-13</div>
        <a href="/course/hexo_site_course/"><div class="recent-posts-item-content">å»ºç«™ç¥å™¨ï¼šHexo+Kaze+Gitee Pages æ­å»ºé™æ€åšå®¢ç½‘ç«™</div></a>
      </div>
    
      <div class="recent-posts-item">
        <div class="recent-posts-item-title">2019-01-24</div>
        <a href="/æ€ç»´/çŸ¥è¯†çš„è¯…å’’ï¼šä¸ºä»€ä¹ˆä½ è§‰å¾—æ˜¾è€Œæ˜“è§ï¼Œè€Œå¯¹æ–¹å´æ— æ³•ç†è§£/"><div class="recent-posts-item-content">çŸ¥è¯†çš„è¯…å’’ï¼šä¸ºä»€ä¹ˆä½ è§‰å¾—æ˜¾è€Œæ˜“è§ï¼Œè€Œå¯¹æ–¹å´æ— æ³•ç†è§£</div></a>
      </div>
    
  </div>
</div>
  </article>
  
  
</div>
          </aside>
        </div>
      </div>
    </div>
  </div>
  
  <footer class="footer">
  <div class="footer-container">
    <div>
      
      <!-- copyringt-->
      <div class="footer-dsc">
        <span>Copyright Â©
          
          2020 -
          
          2020
        </span>
        &nbsp;
        <a href="/" class="footer-link">èœ—ç‰› Java ä¹‹å®¶ </a>
      </div>

       <!-- copyringt-->
       <div class="footer-dsc">
        <center><span>
        <a href="https://java4u.cn/resources/" target="_blank">Java ç¨‹åºå‘˜æœ€å…¨èµ„æºä¸‹è½½</a> - <a href="https://java4u.cn/links/" target="_blank">å‹æƒ…é“¾æ¥</a>
        </span></center>
      </div>
     
    </div>

    
    
    
    
      <div class="footer-dsc">
        
        æœ¬ç«™æ€»è®¿é—®é‡<span id="busuanzi_value_site_pv"></span>æ¬¡
        
        
        <span>&nbsp;|&nbsp;</span>
        
        
        æœ¬ç«™æ€»è®¿å®¢æ•°<span id="busuanzi_value_site_uv"></span>æ¬¡
        
      </div>
      
    
</footer>
  <a role="button" id="scrollbutton" class="basebutton"  aria-label="å›åˆ°é¡¶éƒ¨">
  <i class="iconfont icon-arrowleft button-icon"></i>
</a>
<a role="button" id="menubutton" class="basebutton">
  <i class="iconfont icon-menu button-icon"></i>
</a>
<a role="button" id="popbutton" class="basebutton" aria-label="æ§åˆ¶ä¸­å¿ƒ">
  <i class="iconfont icon-expand button-icon"></i>
</a>
<a role="button" id="darkbutton" class="basebutton darkwidget" aria-label="å¤œè‰²æ¨¡å¼">
  <i class="iconfont icon-weather button-icon"></i>
</a>
<a role="button" id="searchbutton" class="basebutton searchwidget" aria-label="æœç´¢">
  <i class="iconfont icon-search button-icon"></i>
</a>

  
  
  

  
  
  <script>
  var addImgLayout = function () {
    var img = document.querySelectorAll('.post-content img');
    var i;
    for (i = 0; i < img.length; i++) {
      var wrapper = document.createElement('a');
      wrapper.setAttribute('href', img[i].getAttribute('data-src'));
      wrapper.setAttribute('aria-label', 'illustration');
      wrapper.style.cssText = 'width: 100%; display: flex; justify-content: center;';
      if (img[i].alt) wrapper.dataset.caption = img[i].alt;
      wrapper.dataset.nolink = true;
      img[i].before(wrapper);
      wrapper.append(img[i]);
      var divWrap = document.createElement('div');
      divWrap.classList.add('gallery');
      wrapper.before(divWrap);
      divWrap.append(wrapper);
    }
    baguetteBox.run('.gallery');
  }
</script>
<script>loadScript("/js/lib/lightbox/baguetteBox.min.js", addImgLayout)</script>
  
  
  
<script src="/js/main.js"></script>

  
  <script>loadScript("/js/lib/busuanzi.min.js")</script>
  
  
  <script>
    var addLazyload = function () {
      var observer = lozad('.lozad', {
        load: function (el) {
          el.srcset = el.getAttribute('data-src');
        },
        loaded: function (el) {
          el.classList.add('loaded');
        }
      });
      observer.observe();
    }
  </script>
  <script>loadScript("/js/lib/lozad.min.js", addLazyload)</script>
  
  
</body>

</html>